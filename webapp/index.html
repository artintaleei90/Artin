<!-- webapp/index.html -->
<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù‡Ø§Ù„Ø³ØªÙˆÙ†</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: sans-serif;
      direction: rtl;
      background: #f4f4f4;
      padding: 20px;
    }
    .product {
      background: white;
      padding: 10px;
      margin-bottom: 20px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    .product img {
      width: 100%;
      border-radius: 10px;
    }
    .product-title {
      font-weight: bold;
      margin: 10px 0;
    }
    input, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      font-size: 16px;
    }
    button {
      background: #0088cc;
      color: white;
      border: none;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <h2>ğŸ› ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù‡Ø§Ù„Ø³ØªÙˆÙ†</h2>

  <div class="product">
    <img src="https://halston.ir/uploads/1303.jpg" alt="Ù…Ø§Ù†ØªÙˆ Ú©Ø±Ù…">
    <div class="product-title">1303 - Ù…Ø§Ù†ØªÙˆ Ú©Ø±Ù…</div>
    <div>Ù‚ÛŒÙ…Øª: 747,000 ØªÙˆÙ…Ø§Ù†</div>
    <label>ØªØ¹Ø¯Ø§Ø¯:</label>
    <input type="number" id="count-1303" min="0" value="0">
  </div>

  <div class="product">
    <img src="https://halston.ir/uploads/3390.jpg" alt="Ù…Ø§Ù†ØªÙˆ Ù…Ø´Ú©ÛŒ">
    <div class="product-title">3390 - Ù…Ø§Ù†ØªÙˆ Ù…Ø´Ú©ÛŒ</div>
    <div>Ù‚ÛŒÙ…Øª: 697,000 ØªÙˆÙ…Ø§Ù†</div>
    <label>ØªØ¹Ø¯Ø§Ø¯:</label>
    <input type="number" id="count-3390" min="0" value="0">
  </div>

  <h3>ğŸ“ Ù…Ø´Ø®ØµØ§Øª Ø´Ù…Ø§</h3>
  <input type="text" id="name" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„">
  <input type="text" id="phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
  <input type="text" id="city" placeholder="Ø´Ù‡Ø±">
  <input type="text" id="address" placeholder="Ø¢Ø¯Ø±Ø³">

  <button onclick="submitOrder()">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const products = {
      "1303": { name: "Ù…Ø§Ù†ØªÙˆ Ú©Ø±Ù… - Ù¾Ú© Û´ Ø¹Ø¯Ø¯ÛŒ", price: 747000 },
      "3390": { name: "Ù…Ø§Ù†ØªÙˆ Ù…Ø´Ú©ÛŒ - Ù¾Ú© Û¶ Ø¹Ø¯Ø¯ÛŒ", price: 697000 }
    };

    function submitOrder() {
      const orders = [];

      for (const code in products) {
        const count = parseInt(document.getElementById(`count-${code}`).value);
        if (count > 0) {
          orders.push({ code, ...products[code], count });
        }
      }

      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const city = document.getElementById("city").value.trim();
      const address = document.getElementById("address").value.trim();

      if (!orders.length || !name || !phone || !city || !address) {
        alert("ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ Ùˆ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø­ØµÙˆÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.");
        return;
      }

      tg.sendData(JSON.stringify({ name, phone, city, address, orders }));
    }
  </script>
</body>
</html>
